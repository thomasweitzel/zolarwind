{% import "macros/head.html" as head %}
<!DOCTYPE html>
<html dir="ltr" lang="{{ config.default_language }}">
<head>
  {# Initialize language resources #}
  {% set res         = load_data(path=config.extra.path_language_resources ~ config.default_language ~ '.toml') %}
  {% set locale      = res.settings_locale      | default(value="en")        %}
  {% set date_locale = res.settings_date_locale | default(value="en_US")     %}
  {% set date_format = res.settings_date_format | default(value="%B %d, %Y") %}
  {% set page_value = page | default(value=false) %}
  {% set section_value = section | default(value=false) %}
  {% set taxonomy_value = taxonomy | default(value=false) %}
  {% set term_value = term | default(value=false) %}

  <meta charset="UTF-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="generator" content="{{ config.extra.generator | default(value='Zola') }}">

  {% set description = head::page_description(config=config, page=page_value, section=section_value) | trim %}
  {% if description %}
    <meta name="description" content="{{ description }}">
  {% endif %}

  <title>
    {% block title %}
      {{ head::page_title(config=config, res=res, page=page_value, section=section_value, taxonomy=taxonomy_value, term=term_value) }}
    {% endblock title %}
  </title>
  {% set current_url_value = current_url | default(value="") %}
  {% set canonical_url = head::canonical_url(page=page_value, section=section_value, taxonomy=taxonomy_value, term=term_value, current_url=current_url_value) | trim %}
  {% if canonical_url %}
    <link rel="canonical" href="{{ canonical_url }}" />
  {% endif %}
  <link rel="stylesheet" href="{{ get_url(path='/css/generated.css') }}">
  {% block head_extra %}{% endblock head_extra %}
  {% if config.extra.favicon_svg %}
    <link rel="icon" href="{{ get_url(path=config.extra.favicon_svg) }}" />
  {% endif %}

  {% if config.generate_feeds %}
    <link rel="alternate" type="application/atom+xml" title="{{ res.atom_feed_title }}" href="{{ get_url(path='/atom.xml') }}" />
  {% endif %}

  <script defer src="{{ get_url(path='/js/zolarwind/logic.js') }}" integrity="sha384-{{ get_hash(path='/js/zolarwind/logic.js') }}"></script>
  {% if page is defined and page.extra and page.extra.math %}
    <link rel="stylesheet" href="{{ get_url(path='/js/katex/katex.min.css') }}" integrity="sha384-{{ get_hash(path='/js/katex/katex.min.css') }}">
    <script defer src="{{ get_url(path='/js/katex/katex.min.js') }}" integrity="sha384-{{ get_hash(path='/js/katex/katex.min.js') }}"></script>
    <script defer src="{{ get_url(path='/js/katex/contrib/auto-render.min.js') }}" integrity="sha384-{{ get_hash(path='/js/katex/contrib/auto-render.min.js') }}"></script>
    <script defer src="{{ get_url(path='/js/katex-config.js') }}" integrity="sha384-{{ get_hash(path='/js/katex-config.js') }}"></script>
  {% endif %}
  {% if page is defined and page.extra and page.extra.diagram %}
    <script defer src="{{ get_url(path='/js/diagram/mermaid.min.js') }}" integrity="sha384-{{ get_hash(path='/js/diagram/mermaid.min.js') }}"></script>
    <script defer src="{{ get_url(path='/js/diagram/mermaid-config.js') }}" integrity="sha384-{{ get_hash(path='/js/diagram/mermaid-config.js') }}"></script>
  {% endif %}
</head>
<body>
  {% include "partials/header.html" %}
  <main id="content">
    {% block content %}{% endblock content %}
  </main>
  {% include "partials/footer.html" %}
</body>
</html>
