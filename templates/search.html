{% extends "base.html" %}

{% block content %}
<div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
  <h1 class="text-xl font-bold">
    {{ res.search_title }}
  </h1>

  {% if config.build_search_index %}
    <div
      id="search"
      class="mt-6"
      data-base-url="{{ config.base_url }}"
      data-page-size="{{ page.extra.results_per_page | default(value=10) }}"
      data-page-window="{{ page.extra.pagination_window | default(value=3) }}"
      data-page-label="{{ res.search_page_label }}"
      data-pagination-label="{{ res.search_pagination_label }}"
      data-no-results="{{ res.search_no_results }}"
      data-results-one="{{ res.search_results_one }}"
      data-results-other="{{ res.search_results_other }}"
      data-error="{{ res.search_error }}"
      data-loading="{{ res.search_loading }}"
    >
      <div class="relative flex items-center gap-2">
        <input
          id="search-input"
          type="search"
          autofocus
          placeholder="{{ res.search_placeholder }}"
          aria-label="{{ res.search_input_label }}"
          class="w-full appearance-none rounded-md bg-neutral-900 border border-neutral-700 px-4 py-3 pr-10 text-neutral-200 placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-primary-300"
        />
        <button
          id="search-clear"
          type="button"
          aria-label="{{ res.search_clear_label }}"
          class="hidden absolute right-3 top-1/2 -translate-y-1/2 text-neutral-500 hover:text-neutral-300"
        >
          <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
            <line x1="6" y1="6" x2="18" y2="18" />
            <line x1="18" y1="6" x2="6" y2="18" />
          </svg>
        </button>
      </div>

      <p id="search-status" class="mt-4 text-sm text-neutral-400"></p>
      <div id="search-results" class="mt-6 grid grid-cols-1 gap-4"></div>
      <nav id="search-pagination" class="mt-6 flex flex-wrap gap-2" aria-label="{{ res.search_pagination_label }}"></nav>
      <template id="search-result-template">
        <article class="flex flex-col rounded-md shadow-md overflow-hidden shadow-neutral-800 bg-neutral-900 border-neutral-900 border-1">
          <div class="flex-1 p-6 flex flex-col justify-between">
            <div class="flex-1">
              <a data-search-link class="block">
                <h3 data-search-title class="mt-2 text-lg leading-6 font-semibold text-neutral-100 hover:text-neutral-50"></h3>
              </a>
              <p data-search-summary class="mt-3 text-base leading-6 text-neutral-400"></p>
            </div>
          </div>
        </article>
      </template>
    </div>

    <script defer src="{{ get_url(path='/js/minisearch.min.js') }}" integrity="sha384-{{ get_hash(path='/js/minisearch.min.js') }}"></script>
    <script defer src="{{ get_url(path='/search_index.' ~ config.default_language ~ '.js') }}" integrity="sha384-{{ get_hash(path='/search_index.' ~ config.default_language ~ '.js') }}"></script>
    <script defer src="{{ get_url(path='/js/search.js') }}" integrity="sha384-{{ get_hash(path='/js/search.js') }}"></script>
  {% else %}
    <p class="mt-4 text-neutral-400">{{ res.search_index_disabled }}</p>
  {% endif %}
</div>
{% endblock %}
